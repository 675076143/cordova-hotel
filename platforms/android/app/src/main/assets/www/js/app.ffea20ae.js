(function(e){function t(t){for(var r,c,n=t[0],i=t[1],l=t[2],m=0,d=[];m<n.length;m++)c=n[m],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var i=a[n];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},o={app:0},s=[];function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var u=i;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2395:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{background:e.background},attrs:{id:"app"}},[a("router-view"),a("Button",{staticClass:"changeBG",on:{click:e.changeBackground}},[e._v("更換背景")])],1)},s=[],c={name:"app",mounted:function(){this.$router.push("/")},data:function(){return{background:"white"}},methods:{changeBackground:function(){var e=this;function t(t){e.background="url(data:image/jpeg;base64,"+t+")  0% 0% / cover",console.log(img)}function a(){}r["default"].cordova.camera.getPicture(t,a,{quality:50,destinationType:r["default"].cordova.camera.DestinationType.DATA_URL,sourceType:r["default"].cordova.camera.PictureSourceType.PHOTOLIBRARY})}}},n=c,i=(a("7c55"),a("2877")),l=Object(i["a"])(n,o,s,!1,null,null,null),u=l.exports,m=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("search-free-room",{on:{freeRooms:e.getFreeRooms}}),a("free-rooms",{attrs:{freeRooms:e.freeRooms,checkInDate:e.checkInDate,checkOutDate:e.checkOutDate,"check-dates":e.checkDates}})],1)},f=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchFreeRoom"},[a("h3",[e._v("査詢空房")]),e._m(0),a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"都市",prop:"city"}},[a("Input",{attrs:{placeholder:"输入城市"},model:{value:e.formValidate.city,callback:function(t){e.$set(e.formValidate,"city",t)},expression:"formValidate.city"}})],1),a("FormItem",{attrs:{label:"入住日期",prop:"checkDate"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"Select date",options:e.dateOption,value:e.formValidate.checkDate},on:{"on-change":e.handleChange,"on-clear":e.handleClear}})],1),a("FormItem",{attrs:{label:"入住時長"}},[a("Input",{attrs:{value:e.checkDates+" 天",disabled:""}})],1),a("Button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("査詢空房")])],1)],1)},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("ul",[a("li",[e._v("全日房")]),a("li",[e._v("鐘點房")])])])}],v=(a("0d03"),a("d3b7"),a("96cf"),a("bc3a")),b=a.n(v);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments.length>3?arguments[3]:void 0;return new Promise((function(o){var s;r.$Loading.start(),s="GET"===a?b.a.get(e,{params:t}):"PUT"===a?b.a.put(e,t):"DELETE"===a?b.a.delete(e,t):b.a.post(e,t),s.then((function(e){o(e.data),r.$Loading.finish()})),s.catch((function(e){r.$Loading.error()}))}))}var g="http://114.55.36.231:8090",D=function(e,t,a){return k(g+"/roomOrder/freeRooms",{checkInDate:e,checkOutDate:t},"GET",a)},y=function(e,t){return k(g+"/roomOrder/roomReservations",e,"POST",t)},_={name:"searchFreeRoom",data:function(){return{formValidate:{city:"澳门",checkDate:[]},ruleValidate:{city:[{required:!0,message:"都市名稱不能為空",trigger:"blur"}],checkDate:[{type:"array",required:!0,message:"請選擇時間範圍",fields:{0:{required:!0,message:"請選擇時間範圍",trigger:"blur"},1:{required:!0,message:"請選擇時間範圍",trigger:"blur"}}}]},dateOption:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}}}},computed:{checkDates:function(){var e=Date.parse(this.formValidate.checkDate[0]),t=Date.parse(this.formValidate.checkDate[1]);return Math.floor(Math.abs(t-e)/864e5)}},methods:{handleClear:function(){this.$set(this.formValidate.checkDate,[])},handleChange:function(e){this.formValidate.checkDate=e},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){var a,r;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(!e){o.next=14;break}if(0!==t.checkDates){o.next=5;break}alert("入住時長至少為一天！"),o.next=12;break;case 5:return o.next=7,regeneratorRuntime.awrap(D(t.formValidate.checkDate[0],t.formValidate.checkDate[1],t));case 7:a=o.sent,r={freeRooms:a.data,checkInDate:t.formValidate.checkDate[0],checkOutDate:t.formValidate.checkDate[1],checkDates:t.checkDates},t.$emit("freeRooms",r),console.log(r),t.$Message.success("Success!");case 12:o.next=15;break;case 14:t.$Message.error("Fail!");case 15:case"end":return o.stop()}}))}))}}},R=_,V=(a("e5f3"),Object(i["a"])(R,h,p,!1,null,"9b61ad54",null)),O=V.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"freeRooms"},e._l(e.freeRooms,(function(t,r){return a("div",{staticClass:"freeRoom"},[a("div",{staticClass:"freeRoom-item"},[a("h4",[e._v(e._s(e.getTitle(r)))]),a("p",[e._v(e._s(e.getDesc(r)))]),a("p",{staticStyle:{color:"red"}},[e._v("￥"+e._s(t.solutionPrice))])]),e._t("default",[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.reserveRoom(r)}}},[e._v("預定")])])],2)})),0)},S=[],I=(a("a9e3"),{name:"FreeRooms",props:{freeRooms:{type:Array,default:[]},checkInDate:{type:String,default:""},checkOutDate:{type:String,default:""},checkDates:{type:Number,default:1}},computed:{},methods:{getTitle:function(e){return this.freeRooms[e].roomTypeName+" > "+this.freeRooms[e].solutionName},getDesc:function(e){return this.freeRooms[e].breakfastType+" "+this.freeRooms[e].bedType+" 剩餘 "+this.freeRooms[e].freeCount+" 間"},reserveRoom:function(e){this.$router.push({name:"reserve",params:{freeRoom:this.freeRooms[e],checkInDate:this.checkInDate,checkOutDate:this.checkOutDate,checkDates:this.checkDates}})}}}),w=I,x=(a("57f5"),Object(i["a"])(w,$,S,!1,null,"c02087ee",null)),E=x.exports,C={name:"home",data:function(){return{freeRooms:[],checkInDate:"",checkOutDate:"",checkDates:1}},components:{SearchFreeRoom:O,FreeRooms:E},methods:{getFreeRooms:function(e){this.freeRooms=e.freeRooms,this.checkInDate=e.checkInDate,this.checkOutDate=e.checkOutDate,this.checkDates=e.checkDates}}},P=C,T=(a("cccb"),Object(i["a"])(P,d,f,!1,null,null,null)),N=T.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reserveRooms"},[a("FreeRooms",{staticClass:"reserveRoom-freeRoom",attrs:{freeRooms:[e.reserveRoom]}},[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("p",{staticStyle:{"font-size":"12px"}},[e._v(e._s(this.$route.params.checkInDate)+"/"+e._s(this.$route.params.checkOutDate))]),a("p",{staticStyle:{"font-size":"12px"}},[e._v("共"+e._s(this.$route.params.checkDates)+"天")])])]),a("div",{staticClass:"reserveRooms-main",model:{value:e.formValidate,callback:function(t){e.formValidate=t},expression:"formValidate"}},[a("Form",{ref:"formValidate",staticStyle:{width:"100%"},attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{staticClass:"form-item",attrs:{label:"房間數",prop:"roomCount"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{max:e.reserveRoom.freeCount,min:1},model:{value:e.formValidate.roomOrderSubDtoList[0].orderNumber,callback:function(t){e.$set(e.formValidate.roomOrderSubDtoList[0],"orderNumber",t)},expression:"formValidate.roomOrderSubDtoList[0].orderNumber"}})],1),a("FormItem",{attrs:{label:"入住人",prop:"customerNames"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formValidate.customerNames,callback:function(t){e.$set(e.formValidate,"customerNames",t)},expression:"formValidate.customerNames"}})],1),a("FormItem",{attrs:{label:"聯系手機",prop:"customerPhone"}},[a("Input",{attrs:{placeholder:"请输入您的电话号码"},model:{value:e.formValidate.customerPhone,callback:function(t){e.$set(e.formValidate,"customerPhone",t)},expression:"formValidate.customerPhone"}})],1),a("FormItem",{attrs:{label:"E-mail",prop:"customerEmail"}},[a("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:e.formValidate.customerEmail,callback:function(t){e.$set(e.formValidate,"customerEmail",t)},expression:"formValidate.customerEmail"}})],1),a("FormItem",{attrs:{label:"預計到店",prop:"eta"}},[a("Select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.formValidate.eta,callback:function(t){e.$set(e.formValidate,"eta",t)},expression:"formValidate.eta"}},e._l(e.formValidate.timeList,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),e._m(0),a("div",{staticClass:"submit-bar"},[a("span",[e._v("總價： "),a("span",[e._v("￥"+e._s(e.total))])]),a("Button",{staticClass:"submit-bar-submit",staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("提交訂單")])],1),a("Modal",{staticClass:"order-modal",attrs:{title:"订单流水号："+e.modalTitle,"ok-text":"分享"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("p",[e._v("姓名："+e._s(e.formValidate.customerNames))]),a("p",[e._v("電話："+e._s(e.formValidate.customerPhone))]),a("p",[e._v("郵箱："+e._s(e.formValidate.customerEmail))]),a("p",[e._v("預計到店："+e._s(e.formValidate.eta))]),a("p",[e._v("入住時間："+e._s(e.formValidate.roomOrderSubDtoList[0].checkInDate))]),a("p",[e._v("離店時間："+e._s(e.formValidate.roomOrderSubDtoList[0].checkOutDate))]),a("p",[e._v("訂房數量："+e._s(e.formValidate.roomOrderSubDtoList[0].orderNumber))]),a("p",[e._v("套餐名稱："+e._s(e.formValidate.roomOrderSubDtoList[0].solutionName))])])],1)},L=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reserveRoom-rules"},[a("p",[e._v("預定說明：")]),a("br"),a("p",[e._v("房間整晚保留，14:00前到店可能需要等房")])])}],j=a("ade3"),M=a("c0e9"),q=a.n(M),B={name:"ReserveRoom",components:{FreeRooms:E},mounted:function(){},data:function(){var e;return{modal:!1,modalTitle:"",reserveRoom:this.$route.params.freeRoom,formValidate:(e={customerEmail:"",customerNames:"",customerPhone:"",eta:"",roomOrderSubDtoList:[{checkInDate:this.$route.params.checkInDate,checkOutDate:this.$route.params.checkOutDate,orderNumber:1,solutionName:this.$route.params.freeRoom.solutionName}]},Object(j["a"])(e,"eta",""),Object(j["a"])(e,"timeList",[{label:"14:00",value:this.$route.params.checkInDate+" 14:00:00"},{label:"15:00",value:this.$route.params.checkInDate+" 15:00:00"},{label:"16:00",value:this.$route.params.checkInDate+" 16:00:00"},{label:"17:00",value:this.$route.params.checkInDate+" 17:00:00"},{label:"18:00",value:this.$route.params.checkInDate+" 18:00:00"},{label:"19:00",value:this.$route.params.checkInDate+" 19:00:00"},{label:"20:00",value:this.$route.params.checkInDate+" 20:00:00"},{label:"21:00",value:this.$route.params.checkInDate+" 21:00:00"},{label:"22:00",value:this.$route.params.checkInDate+" 22:00:00"},{label:"23:00",value:this.$route.params.checkInDate+" 23:00:00"}]),e),ruleValidate:{roomCount:[],customerNames:[{required:!0,message:"入住人不能為空",trigger:"blur"}],customerPhone:[{required:!0,message:"聯系手機不能為空",trigger:"blur"}],customerEmail:[{type:"email",message:"郵箱格式不正確",trigger:"blur"}],eta:[{required:!0,message:"到店日期不能為空",trigger:"change"}]}}},computed:{total:function(){var e=this.reserveRoom.solutionPrice*this.formValidate.roomOrderSubDtoList[0].orderNumber*this.$route.params.checkDates;return e}},methods:{ok:function(){var e=this;this.$Message.info("Clicked ok"),q()(document.querySelector("body")).then((function(t){e.$Message.info("調用分享");var a=t.toDataURL("image/png");window.plugins.socialsharing.share(null,"我的訂單",a,null)}))},cancel:function(){},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){var a,r,o,s,c,n,i,l;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:if(!e){u.next=10;break}return a=t.formValidate,r=a.customerEmail,o=a.customerNames,s=a.customerPhone,c=a.eta,n=a.roomOrderSubDtoList,i={customerEmail:r,customerPhone:s,eta:c,roomOrderSubDtoList:n,customerNames:[o]},console.log(i),u.next=6,regeneratorRuntime.awrap(y(i,t));case 6:l=u.sent,"200"===l.code?(t.$Message.success("預定成功！"),t.modal=!0,t.modalTitle=l.data):t.$Message.error("fail!"),u.next=11;break;case 10:t.$Message.error("Fail!");case 11:case"end":return u.stop()}}))}))}}},A=B,G=(a("d93c"),Object(i["a"])(A,F,L,!1,null,"164ce47f",null)),z=G.exports;r["default"].use(m["a"]);var U=[{path:"/",name:"home",component:N,meta:{title:"首页"}},{path:"/reserve",name:"reserve",component:z}],J=new m["a"]({mode:"history",base:"",routes:U});J.beforeEach((function(e,t,a){document.title=e.matched[0].meta.title,a()}));var H=J,Y=a("2f62");r["default"].use(Y["a"]);var K=new Y["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Q=a("f825"),W=a.n(Q),X=(a("f8ce"),a("41c6")),Z=a.n(X);r["default"].use(W.a),r["default"].use(Z.a),r["default"].config.productionTip=!1;if("file:"===window.location.protocol||"3000"===window.location.port){var ee=document.createElement("script");ee.setAttribute("type","text/javascript"),ee.setAttribute("src","cordova.js"),document.body.appendChild(ee)}r["default"].cordova.on("deviceready",(function(){console.log("Cordova : device is ready !"),console.log("Vue.cordova :",r["default"].cordova)})),new r["default"]({router:H,store:K,render:function(e){return e(u)}}).$mount("#app")},"57f5":function(e,t,a){"use strict";var r=a("58e6"),o=a.n(r);o.a},"58e6":function(e,t,a){},"5ced":function(e,t,a){},7685:function(e,t,a){},"7c55":function(e,t,a){"use strict";var r=a("2395"),o=a.n(r);o.a},cccb:function(e,t,a){"use strict";var r=a("5ced"),o=a.n(r);o.a},d4cf:function(e,t,a){},d93c:function(e,t,a){"use strict";var r=a("d4cf"),o=a.n(r);o.a},e5f3:function(e,t,a){"use strict";var r=a("7685"),o=a.n(r);o.a}});
//# sourceMappingURL=app.ffea20ae.js.map